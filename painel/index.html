<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Admin | Abella Joias</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<style>
body{font-family:'Poppins',sans-serif;background:#fcfaf7;margin:0;}
header{background:white;padding:1.5rem;box-shadow:0 2px 6px rgba(0,0,0,0.05);display:flex;justify-content:space-between;align-items:center;}
h1{color:#b8860b;font-weight:800;font-size:1.75rem;}
nav button{margin-left:0.5rem;}
button{cursor:pointer;transition:0.2s;}
button:hover{opacity:0.85;}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;margin-top:1rem;}
@media(max-width:768px){.grid{grid-template-columns:1fr;}}
.card{background:white;border:1px solid #eee;border-radius:16px;padding:1rem;box-shadow:0 4px 20px rgba(212,175,55,0.15);}
.card img{width:100%;height:auto;aspect-ratio:1/1;object-fit:cover;border-radius:12px;margin-bottom:0.5rem;}
.card button{margin-top:0.5rem;padding:0.4rem 0.6rem;border-radius:9999px;font-weight:600;font-size:0.75rem;}
.section{display:none;}
.section.active{display:block;}
</style>
</head>
<body>

<header>
  <h1>Admin <span class="text-black">Abella Joias</span></h1>
  <nav>
    <button class="btn btn-gold" onclick="showSection('pedidos')">Pedidos</button>
    <button class="btn btn-gold" onclick="showSection('produtos')">Produtos</button>
    <button class="btn btn-gold" onclick="showSection('categorias')">Categorias</button>
    <button class="btn btn-gold" onclick="showSection('galvanicas')">Galvânicas</button>
    <button class="btn btn-gold" onclick="showSection('ajustes')">Ajustes</button>
  </nav>
</header>

<main class="max-w-7xl mx-auto p-6">

<!-- Pedidos -->
<section id="pedidos" class="section active">
<h2 class="text-xl font-bold mb-4">Pedidos</h2>
<button onclick="gerarRomaneio()" class="btn btn-black mb-4">Gerar Romaneio / Imprimir</button>
<div id="listaPedidos"></div>
</section>

<!-- Produtos -->
<section id="produtos" class="section">
<h2 class="text-xl font-bold mb-4">Produtos</h2>
<div class="grid" id="gridProdutos"></div>
</section>

<!-- Categorias -->
<section id="categorias" class="section">
<h2 class="text-xl font-bold mb-4">Categorias</h2>
<div class="grid" id="gridCategorias"></div>
</section>

<!-- Galvanicas -->
<section id="galvanicas" class="section">
<h2 class="text-xl font-bold mb-4">Galvânicas</h2>
<div class="grid" id="gridGalvanicas"></div>
</section>

<!-- Ajustes -->
<section id="ajustes" class="section">
<h2 class="text-xl font-bold mb-4">Ajustes</h2>
<p>Configurações futuras...</p>
</section>

</main>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDPBZSxW8XjtQmDMUknzAyIlFda51MvMJY",
  authDomain: "catalogo-abella-joias.firebaseapp.com",
  databaseURL: "https://catalogo-abella-joias-default-rtdb.firebaseio.com",
  projectId: "catalogo-abella-joias",
  storageBucket: "catalogo-abella-joias.firebasestorage.app",
  messagingSenderId: "727568435294",
  appId: "1:727568435294:web:442c0179ecf0686dff4ccf"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

// Toggle Sections
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// LISTA PEDIDOS
function carregarPedidos(){
  const div=document.getElementById('listaPedidos');
  div.innerHTML='';
  db.ref('orders').on('value',snap=>{
    div.innerHTML='';
    snap.forEach(s=>{
      const o=s.val();
      div.innerHTML+=`
        <div class="card">
          <div><strong>Cliente:</strong> ${o.cliente} | <strong>WhatsApp:</strong> ${o.whatsapp}</div>
          <div><strong>Total:</strong> R$ ${o.total.toFixed(2)} | <strong>Status:</strong> ${o.status}</div>
          <button onclick="removerPedido('${s.key}')" class="btn btn-gold">Excluir</button>
        </div>
      `;
    });
  });
}
function removerPedido(key){if(confirm('Excluir pedido?')) db.ref('orders/'+key).remove();}

// ROMANEIO
function gerarRomaneio(){
  db.ref('orders').once('value').then(snap=>{
    let html=`<html><head><title>Romaneio de Pedidos</title>
      <style>body{font-family:Poppins,sans-serif;}h1{text-align:center;}table{width:100%;border-collapse:collapse;margin-top:20px;}td,th{border:1px solid #222;padding:8px;text-align:left;}th{background:#d4af37;color:white;}</style>
      </head><body><h1>Romaneio de Pedidos</h1><table><tr><th>Cliente</th><th>WhatsApp</th><th>Total</th></tr>`;
    snap.forEach(s=>{const o=s.val(); html+=`<tr><td>${o.cliente}</td><td>${o.whatsapp}</td><td>R$ ${o.total.toFixed(2)}</td></tr>`});
    html+=`</table></body></html>`;
    let win=window.open(); win.document.write(html); win.document.close(); win.print();
  });
}

// LISTA PRODUTOS
function carregarProdutos(){
  const div=document.getElementById('gridProdutos');
  db.ref('products').on('value',snap=>{
    div.innerHTML='';
    snap.forEach(s=>{
      const p=s.val();
      div.innerHTML+=`
        <div class="card">
          <img src="${p.image||'https://via.placeholder.com/400'}" alt="${p.name}">
          <div class="font-bold">${p.name}</div>
          <div>R$ ${p.preco}</div>
          <button onclick="editarProduto('${s.key}')">Editar</button>
          <button onclick="excluirProduto('${s.key}')">Excluir</button>
        </div>`;
    });
  });
}
function editarProduto(key){alert('Editar produto: '+key);}
function excluirProduto(key){if(confirm('Excluir produto?')) db.ref('products/'+key).remove();}

// LISTA CATEGORIAS
function carregarCategorias(){
  const div=document.getElementById('gridCategorias');
  db.ref('categories').on('value',snap=>{
    div.innerHTML='';
    snap.forEach(s=>{
      const c=s.val();
      div.innerHTML+=`
        <div class="card">
          <img src="${c.image||'https://via.placeholder.com/400'}" alt="${c.name}">
          <div class="font-bold">${c.name}</div>
          <button onclick="editarCategoria('${s.key}')">Editar</button>
          <button onclick="excluirCategoria('${s.key}')">Excluir</button>
        </div>`;
    });
  });
}
function editarCategoria(key){alert('Editar categoria: '+key);}
function excluirCategoria(key){if(confirm('Excluir categoria?')) db.ref('categories/'+key).remove();}

// LISTA GALVÂNICAS
function carregarGalvanicas(){
  const div=document.getElementById('gridGalvanicas');
  db.ref('galvanicas').on('value',snap=>{
    div.innerHTML='';
    snap.forEach(s=>{
      const g=s.val();
      div.innerHTML+=`
        <div class="card">
          <div class="font-bold">${g.name}</div>
          <div>${g.endereco}</div>
          <div>${g.telefone}</div>
          <button onclick="editarGalvanica('${s.key}')">Editar</button>
          <button onclick="excluirGalvanica('${s.key}')">Excluir</button>
        </div>`;
    });
  });
}
function editarGalvanica(key){alert('Editar galvanica: '+key);}
function excluirGalvanica(key){if(confirm('Excluir galvanica?')) db.ref('galvanicas/'+key).remove();}

// Inicializar
carregarPedidos(); carregarProdutos(); carregarCategorias(); carregarGalvanicas();
</script>

</body>
</html>
